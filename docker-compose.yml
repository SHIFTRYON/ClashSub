services:
  clash-subscription:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: clash-subscription
    restart: unless-stopped
    ports:
      - "28033:8000"
    environment:
      - TZ=UTC
      - UPDATE_INTERVAL_HOURS=6
      # Optional: override with a custom config path inside container.
      # - SUBSCRIPTION_CONFIG=/app/configs/subscription.local.yaml
    volumes:
      # Keep runtime config readable from host; secrets go in subscription.local.yaml.
      - ./configs:/app/configs:ro
      # Keep template files as read-only input.
      - ./templates:/app/templates:ro
      # Persist generated output files outside tracked repo files.
      - ./outputs:/app/outputs
